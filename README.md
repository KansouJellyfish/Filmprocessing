# Filmprocessing
本简(jian)易(lou)脚本使用 matlab 编写，旨在快速、（较为）准确、批量化地为彩色负片去除色罩。脚本可能存在一些问题，包括原理上或代码上，欢迎批评指正！
# 使用方法
## 前期准备
### 胶卷拍摄
- 使用胶卷拍摄正常曝光下的 18% 灰卡（以柯达 5207 为例，其特性曲线在 5500 K下测得，则需要使用该胶卷拍摄一张 5500 K 下正常曝光的灰卡，例如正午太阳底下），作为参考点
### 翻拍
- 在正确的翻拍条件（稳定光源、校准白平衡、调整曝光度至合适值等）的情况下，使用相机拍摄胶片，并以 RAW 格式记录
- 拍摄所有胶卷，包括参考点
- 拍摄黑点、白点，黑点为光源全部被遮挡的图片，图片，白点为移除胶卷直接拍摄光源的图片
### 去色罩前准备
- 所有翻拍照片的 RAW 文件
- 参考点、黑点、白点的 RAW 文件
- 安装软件 DCraw
- 准备数字化后的胶卷的特性曲线
## 将图像线性化
打开脚本 tiffconvert.m，修改需要处理照片的路径、照片文件起止编号，运行脚本，通过调用 DCraw 将翻拍图像（包括黑点、白点、参考点图片）线性化，以 tiff 储存在图片的目录
## 去色罩
将黑点、白点、参考点照片分别命名为 black.tiff，white.tiff，flat.tiff 并放在需要处理照片的目录中；打开脚本 filmprocessing.m，修改需要处理照片的路径、照片文件起止编号，运行脚本。完成去色罩后的照片将存放在照片目录下的 converted 文件夹中
